Node 0 adjustSent for 1 to 0+0.5 while processing addWeight
SEND 0 1 {"command":"transfer","amount":0.5}
transfer 0 -> 1
Node 1 adjustSent for 0 to 0+100 while processing addWeight
SEND 1 0 {"command":"transfer","amount":100}
transfer 1 -> 0
Node 1 adjustSent for 0 to 100+200 while processing addWeight
SEND 1 0 {"command":"transfer","amount":200}
transfer 1 -> 0
Node 2 adjustSent for 0 to 0+100 while processing addWeight
SEND 2 0 {"command":"transfer","amount":100}
transfer 2 -> 0
Node 1 adjustSent for 2 to 0+2 while processing addWeight
SEND 1 2 {"command":"transfer","amount":2}
transfer 1 -> 2
Node 1 adjustSent for 0 to 300+2 while processing addWeight
SEND 1 0 {"command":"transfer","amount":2}
transfer 1 -> 0
Node 2 adjustSent for 0 to 100+23 while processing addWeight
SEND 2 0 {"command":"transfer","amount":23}
transfer 2 -> 0
Node 3 adjustSent for 2 to 0+12 while processing addWeight
SEND 3 2 {"command":"transfer","amount":12}
transfer 3 -> 2
Node 1 adjustSent for 3 to 0+10 while processing addWeight
SEND 1 3 {"command":"transfer","amount":10}
transfer 1 -> 3
Node 3 adjustSent for 0 to 0+10 while processing addWeight
SEND 3 0 {"command":"transfer","amount":10}
transfer 3 -> 0
Node 1 adjustSent for 0 to 302+20 while processing addWeight
SEND 1 0 {"command":"transfer","amount":20}
transfer 1 -> 0
Node 0 adjustSent for 2 to 0+10 while processing addWeight
SEND 0 2 {"command":"transfer","amount":10}
transfer 0 -> 2
Node 2 adjustSent for 1 to 0+10 while processing addWeight
SEND 2 1 {"command":"transfer","amount":10}
transfer 2 -> 1
Node 2 adjustSent for 1 to 10+10 while processing addWeight
SEND 2 1 {"command":"transfer","amount":10}
transfer 2 -> 1
RCV[0->1]transfer 0.5
RCV[1->0]transfer 100
transfer receiver starts probe
SEMAPHORE REQ 0
SEMAPHORE GO 0-0
0 starts probe 0-0
0 is setting whenDone for 0-0
Node 0 starting probe 0-0:0 [0]
0 has checked the suitability of possible next hop 2 for probe 0-0 -> true
SEND 0 2 {"command":"probe","probeId":"0-0","incarnation":0,"debugInfo":{"path":[],"backtracked":[]}}
RCV[1->0]transfer 200
transfer receiver starts probe
SEMAPHORE REQ 0
RCV[2->0]transfer 100
RCV[1->2]transfer 2
RCV[1->0]transfer 2
RCV[2->0]transfer 23
RCV[3->2]transfer 12
transfer receiver starts probe
SEMAPHORE REQ 2
RCV[1->3]transfer 10
transfer receiver starts probe
SEMAPHORE REQ 3
RCV[3->0]transfer 10
RCV[1->0]transfer 20
RCV[0->2]transfer 10
transfer receiver starts probe
SEMAPHORE REQ 2
RCV[2->1]transfer 10
transfer receiver starts probe
SEMAPHORE REQ 1
RCV[2->1]transfer 10
transfer receiver starts probe
SEMAPHORE REQ 1
RCV[0->2]probe 0-0:0 
2 recording probe traffic in from receiveProbe "0-0" [0 2]
Node 2 considering probe 0-0:0 [0 2]
2 nacks counter-balance probe 0-0:0 from 0
SEND 2 0 {"command":"nack","probeId":"0-0","incarnation":0,"debugInfo":{"path":[],"backtracked":[]}}
RCV[2->0]nack 0-0:0  / 
(0-0:0) / 0 2
0 is done with current probe 0-0 due to nack-and-finished
0 is calling whenDone for 0-0
0 is deleting whenDone for 0-0
SEMAPHORE DONE 0-0
SEMAPHORE GO 0-1
0 starts probe 0-1
0 is setting whenDone for 0-1
Node 0 starting probe 0-1:0 [0]
0 is done with current probe 0-1 due to non-starter
0 is calling whenDone for 0-1
0 is deleting whenDone for 0-1
SEMAPHORE DONE 0-1
SEMAPHORE GO 2-0
2 starts probe 2-0
2 is setting whenDone for 2-0
Node 2 starting probe 2-0:0 [2]
2 has checked the suitability of possible next hop 0 for probe 2-0 -> true
2 has checked the suitability of possible next hop 1 for probe 2-0 -> true
SEND 2 0 {"command":"probe","probeId":"2-0","incarnation":0,"debugInfo":{"path":[],"backtracked":[]}}
RCV[2->0]probe 2-0:0 
0 recording probe traffic in from receiveProbe "2-0" [2 0]
Node 0 considering probe 2-0:0 [2 0]
no outgoing links, so sending nack 0->2 2-0:0 [] []
0 is done with current probe 2-0 due to leaf
0 is calling whenDone for 2-0
0 is done with incoming 2-0
0 is deleting whenDone for 2-0
SEND 0 2 {"command":"nack","probeId":"2-0","incarnation":0,"debugInfo":{"path":[],"backtracked":[]}}
RCV[0->2]nack 2-0:0  / 
2 has checked the suitability of possible next hop 0 for probe 2-0 (balance: 113000000 -> false
2 has checked the suitability of possible next hop 1 for probe 2-0 (balance: 18000000 -> true
(2-0:0) 2 / 0
2 received nack from 0 for its own probe (2-0:0) and switches to next incarnation (2-0:1)
Node 2 starting probe 2-0:1 [2]
2 has checked the suitability of possible next hop 0 for probe 2-0 -> false
2 has checked the suitability of possible next hop 1 for probe 2-0 -> true
SEND 2 1 {"command":"probe","probeId":"2-0","incarnation":1,"debugInfo":{"path":[]}}
RCV[2->1]probe 2-0:1 
1 recording probe traffic in from receiveProbe "2-0" [2 1]
Node 1 considering probe 2-0:1 [2 1]
1 has checked the suitability of possible next hop 0 for probe 2-0 -> true
1 has checked the suitability of possible next hop 3 for probe 2-0 -> true
SEND 1 0 {"command":"probe","probeId":"2-0","incarnation":1,"debugInfo":{"path":["2"]}}
RCV[1->0]probe 2-0:1 2
0 recording probe traffic in from receiveProbe "2-0" [2 1 0]
Node 0 considering probe 2-0:1 [2 1 0]
no outgoing links, so sending nack 0->1 2-0:1 [2] []
0 is done with current probe 2-0 due to leaf
0 is calling whenDone for 2-0
0 is done with incoming 2-0
0 is deleting whenDone for 2-0
SEND 0 1 {"command":"nack","probeId":"2-0","incarnation":1,"debugInfo":{"path":["2"],"backtracked":[]}}
RCV[0->1]nack 2-0:1 2 / 
1 reconsiders probe 2-0 from 2 after receiving nack from 0
1 has checked the suitability of possible next hop 0 for probe 2-0 -> false
1 has checked the suitability of possible next hop 3 for probe 2-0 -> true
(2-0:1) 2 1 / 0
SEND 1 3 {"command":"probe","probeId":"2-0","incarnation":2,"debugInfo":{"path":["2"]}}
RCV[1->3]probe 2-0:2 2
3 recording probe traffic in from receiveProbe "2-0" [2 1 3]
Node 3 considering probe 2-0:2 [2 1 3]
3 has checked the suitability of possible next hop 0 for probe 2-0 -> true
3 has checked the suitability of possible next hop 2 for probe 2-0 -> true
SEND 3 0 {"command":"probe","probeId":"2-0","incarnation":2,"debugInfo":{"path":["2","1"]}}
RCV[3->0]probe 2-0:2 2 1
0 recording probe traffic in from receiveProbe "2-0" [2 1 3 0]
Node 0 considering probe 2-0:2 [2 1 3 0]
no outgoing links, so sending nack 0->3 2-0:2 [2 1] []
0 is done with current probe 2-0 due to leaf
0 is calling whenDone for 2-0
0 is done with incoming 2-0
0 is deleting whenDone for 2-0
SEND 0 3 {"command":"nack","probeId":"2-0","incarnation":2,"debugInfo":{"path":["2","1"],"backtracked":[]}}
RCV[0->3]nack 2-0:2 2 1 / 
3 reconsiders probe 2-0 from 1 after receiving nack from 0
3 has checked the suitability of possible next hop 0 for probe 2-0 -> false
3 has checked the suitability of possible next hop 2 for probe 2-0 -> true
(2-0:2) 2 1 3 / 0
SEND 3 2 {"command":"probe","probeId":"2-0","incarnation":3,"debugInfo":{"path":["2","1"]}}
RCV[3->2]probe 2-0:3 2 1
2 recording probe traffic in from receiveProbe "2-0" [2 1 3 2]
Node 2 considering probe 2-0:3 [2 1 3 2]
Initiator 2 sets scout amount for (2-0:3-) to incoming balance 12
SEND 2 3 {"command":"scout","probeId":"2-0","maxIncarnation":3,"amount":12,"debugInfo":{"loop":["2","1","3","2"]}}
(2-0:3)  [2 1 3 2]
SEMAPHORE REQ 2
RCV[2->3]scout 2-0:3-  12 2 1 3 2
3 is OK with scout amount for (2-0:3-) based on out balance to 2 because 12 <= 12
3 is OK with scout amount for (2-0:3-) based on in balance from 1 because 12 <= 12
SEND 3 1 {"command":"scout","probeId":"2-0","maxIncarnation":3,"amount":12,"debugInfo":{"loop":["2","1","3","2"]}}
RCV[3->1]scout 2-0:3-  12 2 1 3 2
1 adjust the scout amount for (2-0:3-) based on out balance to 3 from 12 to 10
1 is OK with scout amount for (2-0:3-) based on in balance from 2 because 10 <= 10
SEND 1 2 {"command":"scout","probeId":"2-0","maxIncarnation":3,"amount":10,"debugInfo":{"loop":["2","1","3","2"]}}
RCV[1->2]scout 2-0:3-  10 2 1 3 2
Initiator 2 is still OK with scout amount for (2-0:3-) based on out balance to 1 because 10 <= 18
SEND 2 3 {"command":"propose","probeId":"2-0","maxIncarnation":3,"amount":10,"hash":"o1WCBiqFNmHy6vfL+N8wFzfATUl7QUuU+XG8KIagDEk=","debugInfo":{"loop":["2","1","3","2"]}}
RCV[2->3]propose 2-0:3-  10 o1WCBiqFNmHy6vfL+N8wFzfATUl7QUuU+XG8KIagDEk= 2 1 3 2
SEND 3 1 {"command":"propose","probeId":"2-0","maxIncarnation":3,"amount":10,"hash":"o1WCBiqFNmHy6vfL+N8wFzfATUl7QUuU+XG8KIagDEk=","debugInfo":{"loop":["2","1","3","2"]}}
RCV[3->1]propose 2-0:3-  10 o1WCBiqFNmHy6vfL+N8wFzfATUl7QUuU+XG8KIagDEk= 2 1 3 2
SEND 1 2 {"command":"propose","probeId":"2-0","maxIncarnation":3,"amount":10,"hash":"o1WCBiqFNmHy6vfL+N8wFzfATUl7QUuU+XG8KIagDEk=","debugInfo":{"loop":["2","1","3","2"]}}
RCV[1->2]propose 2-0:3-  10 o1WCBiqFNmHy6vfL+N8wFzfATUl7QUuU+XG8KIagDEk= 2 1 3 2
SEND 2 1 {"command":"commit","probeId":"2-0","amount":10,"preimage":"541f608a3ce3f487","debugInfo":{"loop":["2","1","3","2"]}}
RCV[2->1]commit 2-0:~-  10 541f608a3ce3f487 2 1 3 2
Node 1 adjustSent for 2 to -18+10 while processing commit
SEND 1 3 {"command":"commit","probeId":"2-0","amount":10,"preimage":"541f608a3ce3f487","debugInfo":{"loop":["2","1","3","2"]}}
1 is done with current probe 2-0 due to commit
1 is calling whenDone for 2-0
1 is done with incoming 2-0
1 is deleting whenDone for 2-0
RCV[1->3]commit 2-0:~-  10 541f608a3ce3f487 2 1 3 2
Node 3 adjustSent for 1 to -10+10 while processing commit
SEND 3 2 {"command":"commit","probeId":"2-0","amount":10,"preimage":"541f608a3ce3f487","debugInfo":{"loop":["2","1","3","2"]}}
3 is done with current probe 2-0 due to commit
3 is calling whenDone for 2-0
3 is done with incoming 2-0
3 is deleting whenDone for 2-0
RCV[3->2]commit 2-0:~-  10 541f608a3ce3f487 2 1 3 2
Node 2 adjustSent for 3 to -12+10 while processing commit
2 is done with current probe 2-0 due to commit
2 is calling whenDone for 2-0
2 is done with incoming 2-0
2 is deleting whenDone for 2-0
